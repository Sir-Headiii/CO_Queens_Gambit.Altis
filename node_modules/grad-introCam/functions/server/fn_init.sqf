#include "script_component.hpp"

if !(isServer) exitWith {};

[] call compile preprocessFileLineNumbers "USER\userIntro.sqf";
if (isNil "GRAD_introCam_playOnStart") then {GRAD_introCam_playOnStart = false};
if (isNil "GRAD_introCam_allowForJIP") then {GRAD_introCam_allowForJIP = false};

if (GRAD_introCam_shotDefinitions isEqualTo []) exitWith {diag_log "No Intro Shoots found!";};

if (GRAD_introCam_playOnStart) then {
    [
        {time > _this},
        {
            [["", "BLACK IN"]] remoteExec ["cutText", [0,-2] select isDedicated];
            
            [GRAD_introCam_shotDefinitions, GRAD_introCam_allowForJIP] remoteExec ["GRAD_introCam_fnc_play", [0,-2] select isDedicated, GRAD_introCam_allowForJIP];
            [
                {
                    ["russia"] remoteExec ["playMusic", [0,-2] select isDedicated];
                },
                [],
                6
            ] call CBA_fnc_waitAndExecute;
        },
        (time + 15)
    ] call CBA_fnc_waitUntilAndExecute;
};
